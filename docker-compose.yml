version: "3"
services:
  rabbitmq:
    image: rabbitmq
  cli:
    build:
      dockerfile: cli.Dockerfile
      context: .
    depends_on:
      - rabbitmq
      - apigw
      - bang
      - bar
      - fib
      - foo
    environment:
      - RABBITMQ__CONNECTION__HOSTNAME=rabbitmq
  apigw:
    build:
      dockerfile: apigw.Dockerfile
      context: .
    depends_on:
      - rabbitmq
    environment:
      - RABBITMQ__CONNECTION__HOSTNAME=rabbitmq
  bang:
    build:
      dockerfile: bang.Dockerfile
      context: .
    depends_on:
      - rabbitmq
    environment:
      - RABBITMQ__CONNECTION__HOSTNAME=rabbitmq
  bar:
    build:
      dockerfile: bar.Dockerfile
      context: .
    depends_on:
      - rabbitmq
    environment:
      - RABBITMQ__CONNECTION__HOSTNAME=rabbitmq
  fib:
    build:
      dockerfile: fib.Dockerfile
      context: .
    depends_on:
      - rabbitmq
    environment:
      - RABBITMQ__CONNECTION__HOSTNAME=rabbitmq
  foo:
    build:
      dockerfile: foo.Dockerfile
      context: .
    depends_on:
      - rabbitmq
    environment:
      - RABBITMQ__CONNECTION__HOSTNAME=rabbitmq